(function(t){function e(e){for(var o,i,s=e[0],l=e[1],c=e[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},a={index:0},r=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("c605")},"0624":function(t,e,n){"use strict";var o=n("416c"),a=n.n(o);a.a},1:function(t,e){},"1dfb":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,".dropzone-over{-webkit-box-shadow:0 0 5px #51cbee;box-shadow:0 0 5px #51cbee;border:1px solid #51cbee}",""]),t.exports=e},2:function(t,e){},2883:function(t,e,n){var o=n("7617");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("499e").default;a("5da5e98c",o,!0,{sourceMap:!1,shadowMode:!1})},"3caf":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,".alert.c-1{background-color:#ccc;color:#454545;font-weight:700}.alert.c-1 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-1{background-color:#ccc;border-color:#ccc!important}.text-c-1{color:#ccc}.alert.c-2{background-color:#fddb61;color:#454545;font-weight:700}.alert.c-2 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-2{background-color:#fddb61;border-color:#fddb61!important}.text-c-2{color:#fddb61}.alert.c-3{background-color:#e80;color:#454545;font-weight:700}.alert.c-3 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-3{background-color:#e80;border-color:#e80!important}.text-c-3{color:#e80}.alert.c-4{background-color:#800;color:#fff;font-weight:700}.alert.c-4 .text-muted{color:#fff!important;font-weight:400}.progress-bar.c-4{background-color:#800;border-color:#800!important}.text-c-4{color:#800}.bg-hit{background-color:#ccc}.bg-read{background-color:#fddb61}.bg-dirtied{background-color:#e80}.bg-written{background-color:#800}.btn-group-xs>.btn,.btn-xs{padding:.25rem .4rem;font-size:12px;border-radius:.2rem}.btn-group-xs>.btn,.btn-group-xs>.btn .fa,.btn-xs,.btn-xs .fa{line-height:.5}.plan-node{text-decoration:none;color:#4d525a;display:inline-block;-webkit-transition:all .1s;transition:all .1s;position:relative;font-size:12px;margin-bottom:4px;overflow-wrap:break-word;word-wrap:break-word;width:400px}.twod .plan-node{width:240px}.twod.plan-container.compact .plan-node{width:140px}.twod.plan-container.dot .plan-node{width:50px}.plan-node .plan-node-body{position:relative;border:1px solid #dedede;border-radius:3px;padding:6px 10px;background-color:#fff;-webkit-box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);cursor:auto}.plan-node.parallel .plan-node-body{-webkit-box-shadow:none;box-shadow:none}.plan-node header{margin-bottom:6px;overflow:hidden;cursor:pointer}.plan-node header:hover{background-color:#f7f7f7}.plan-node header h4{font-size:13px;float:left;font-weight:600;margin:0;line-height:inherit}.plan-node header .node-duration{float:right;margin-left:10px;font-size:13px}.plan-node .prop-list{color:inherit;table-layout:fixed}.plan-node:hover .plan-node-body,.plan-node:hover .workers>div{border-color:#00b5e2}.plan-node .node-description{text-align:left;font-style:italic;padding-top:10px;word-break:normal}.plan-node .node-description .node-type{font-weight:600;background-color:#00b5e2;color:#fff;padding:0 6px}.plan-node .btn-default{border:0}.plan-node .text-muted{color:#999ea7}.plan-node .plan-query-container{border:1px solid #dedede;padding:18px;background-color:#fff;position:absolute;-webkit-box-shadow:0 0 10px 2px rgba(0,0,0,.3);box-shadow:0 0 10px 2px rgba(0,0,0,.3);border-radius:3px;margin-bottom:18px;z-index:1;left:0}.plan-node .plan-query-container h3{font-size:17px;width:93%;text-align:left;border-bottom:1px solid #dedede;padding-bottom:6px;margin-bottom:10px}.plan-node .collapse-handle{cursor:pointer;position:absolute;z-index:1;bottom:0;right:0;display:none;background-color:hsla(0,0%,100%,.7)}.plan-node:hover .collapse-handle{display:block}.plan-node.never-executed .plan-node-body{background-image:linear-gradient(45deg,#f7f7f7 25%,transparent 0,transparent 50%,#f7f7f7 0,#f7f7f7 75%,transparent 0,transparent);background-size:1rem 1rem}@-webkit-keyframes highlight{0%{background:#fff}20%{background:#ff9}to{background:#fff}}@keyframes highlight{0%{background:#fff}20%{background:#ff9}to{background:#fff}}.plan-node.highlight .plan-node-body{-webkit-animation:highlight 1s;animation:highlight 1s}.plan-node .workers{position:absolute;left:-1px;top:1px;width:100%;height:100%;cursor:pointer}.plan-node .workers>div{border:1px solid #dedede;border-radius:3px;background-color:#fff;width:100%;height:100%;position:absolute}.plan-node .workers-handle{cursor:pointer;position:absolute;top:0;right:-5px}.plan-node .workers-handle>div{position:absolute;top:0;background-color:#fff;border:1px solid #efefef;border-radius:3px}.plan-node .workers-handle>div:hover{background-color:#f7f7f7;border-color:#dedede}.node-bar-container{height:5px;margin-top:10px;margin-bottom:3px;border-radius:6px;background-color:#dedede;position:relative}.node-bar-container .node-bar{border-radius:6px;height:100%;text-align:left;position:absolute;left:0;top:0}.node-bar-label{text-align:left;display:block}.detailed{width:400px!important}ul.node-children.collapsed .plan-node,ul.node-children.collapsed .plan-node-body{width:50px!important}ul.node-children.collapsed .plan-node{display:block}ul.node-children.collapsed .plan-node .plan-node-body{height:0}ul.node-children.collapsed .plan-node .plan-node-body *{display:none}.classic .plan ul.node-children.collapsed li:before{top:7px}.classic .plan ul.node-children.collapsed li:last-child:after{height:14px}.hljs,.hljs-subst{color:#4d525a}.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-doctag,.hljs-keyword,.hljs-link,.hljs-literal,.hljs-meta-keyword,.hljs-name,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-selector-tag,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#008caf;font-weight:700}.hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#279404;font-weight:600}.hljs-section,.hljs-title{color:#008caf;font-weight:700}.hljs-comment{color:#999ea7;font-style:italic}.hljs-meta{color:#999ea7}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:600}",""]),t.exports=e},"416c":function(t,e,n){var o=n("1dfb");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("499e").default;a("b9a20a5e",o,!0,{sourceMap:!1,shadowMode:!1})},"44bc":function(t,e,n){"use strict";var o=n("2883"),a=n.n(o);a.a},"51dc":function(t,e,n){"use strict";var o=n("5681"),a=n.n(o);a.a},5681:function(t,e,n){var o=n("3caf");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("499e").default;a("7181d17e",o,!0,{sourceMap:!1,shadowMode:!1})},7617:function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,"@import url(https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700|Source+Code+Pro:300,500&display=swap);"]),e.push([t.i,'.alert.c-1{background-color:#ccc;color:#454545;font-weight:700}.alert.c-1 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-1{background-color:#ccc;border-color:#ccc!important}.text-c-1{color:#ccc}.alert.c-2{background-color:#fddb61;color:#454545;font-weight:700}.alert.c-2 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-2{background-color:#fddb61;border-color:#fddb61!important}.text-c-2{color:#fddb61}.alert.c-3{background-color:#e80;color:#454545;font-weight:700}.alert.c-3 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-3{background-color:#e80;border-color:#e80!important}.text-c-3{color:#e80}.alert.c-4{background-color:#800;color:#fff;font-weight:700}.alert.c-4 .text-muted{color:#fff!important;font-weight:400}.progress-bar.c-4{background-color:#800;border-color:#800!important}.text-c-4{color:#800}.bg-hit{background-color:#ccc}.bg-read{background-color:#fddb61}.bg-dirtied{background-color:#e80}.bg-written{background-color:#800}.btn-group-xs>.btn,.btn-xs{padding:.25rem .4rem;font-size:12px;border-radius:.2rem}.btn-group-xs>.btn,.btn-group-xs>.btn .fa,.btn-xs,.btn-xs .fa{line-height:.5}.plan-container{font-family:Noto Sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.plan-container .menu{position:absolute;z-index:1;right:0}.plan-container .menu-hidden h3,.plan-container .menu-hidden ul{display:none}.plan-container .grab-bing{cursor:-webkit-grab;cursor:-o-grab;cursor:grab}.plan-container .grab-bing:active{cursor:-webkit-grabbing;cursor:-o-grabbing;cursor:grabbing}.plan-container .text-muted{color:#ababab!important}.plan-container .cursor-help{cursor:help}.plan-container pre{overflow:initial}.plan-container code{font-weight:300;font-family:Source Code Pro}.plan-container .plan-query-text{background-color:#fff;font-family:Source Code Pro;text-align:left;margin-bottom:0}.plan-container .plan-query-text .code-key-item{background-color:#f8e400;font-weight:600;padding:1px}.plan ol,.plan ul{list-style:none}.twod .plan ol,.twod .plan ul{margin:0;padding:0}.plan ul.node-children{position:relative;-webkit-transition:all .5s;transition:all .5s}.twod .plan ul.node-children{display:-webkit-box;display:-ms-flexbox;display:flex;margin:auto;padding-top:12px;margin-top:-5px}.twod .plan ul.node-children ul.node-children:before{content:"";position:absolute;top:0;left:50%;border-left:2px solid #c4c4c4;height:12px;width:0}.classic .plan ul.node-children:first-child{padding-left:0}.classic .plan ul.node-children:first-child>li:after,.classic .plan ul.node-children:first-child>li:before{display:none}.plan ul.node-children>li{list-style-type:none;position:relative;-webkit-transition:all .5s;transition:all .5s}.twod .plan ul.node-children>li:not(:first-child){padding-left:10px}.twod .plan ul.node-children>li{text-align:center;padding-top:12px}.twod .plan ul.node-children>li:after,.twod .plan ul.node-children>li:before{content:"";position:absolute;top:0;right:50%;border-top:2px solid #c4c4c4;width:50%;height:12px}.twod .plan ul.node-children>li:after{right:auto;left:50%;border-left:2px solid #c4c4c4}.twod .plan ul.node-children>li:only-child{padding-top:0}.twod .plan ul.node-children>li:only-child:after,.twod .plan ul.node-children>li:only-child:before{display:none}.twod .plan ul.node-children>li:first-child:before,.twod .plan ul.node-children>li:last-child:after{border:0 none}.twod .plan ul.node-children>li:last-child:before{border-right:2px solid #c4c4c4;border-radius:0 6px 0 0}.twod .plan ul.node-children>li:first-child:after{border-radius:6px 0 0 0}.classic .plan ul.node-children>li:after,.classic .plan ul.node-children>li:before{content:"";position:absolute;left:-10px}.classic .plan ul.node-children>li:before{border-top:2px solid #c4c4c4;top:22px;width:11px;left:-10px}.classic .plan ul.node-children>li:after{border-left:2px solid #c4c4c4;height:calc(100% + 4px);width:6px;top:-5px}.classic .plan ul.node-children>li:last-child:after{height:29px;border-bottom:2px solid #c4c4c4;border-radius:0 0 0 6px}.classic .plan ul.node-children>li:last-child:before{left:-4px;width:5px}.plan ul.node-children>li .plan-node:hover+ul:before{border-color:#00b5e2}.plan ul.node-children>li .plan-node:hover+ul li:after,.plan ul.node-children>li .plan-node:hover+ul li:before,.plan ul.node-children>li .plan-node:hover+ul ul:before{border-color:#008caf}.plan .subplan{border:1px solid #dedede;border-radius:3px;background-color:#fcfcfc;-webkit-box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);padding:0 10px 6px 10px}.plan .subplan>h4{font-size:12px;margin-top:.5rem;font-weight:600}.classic .plan .subplan{margin-bottom:3px;display:inline-block}.plan .btn-close{border-radius:50%;-webkit-box-shadow:0;box-shadow:0;line-height:1.5;border:1px solid #dedede;background-color:#fff;font-size:12px}.plan .accordion button .fa-chevron-right{display:inline-block}.plan .accordion button .fa-chevron-down{display:none}.plan .accordion button[aria-expanded=true] .fa-chevron-right{display:none!important}.plan .accordion button[aria-expanded=true] .fa-chevron-down{display:inline-block!important}.plan-stats{font-size:13px}.plan-stats .plan-triggers-container{border:1px solid #dedede;padding:18px;background-color:#fff;position:absolute;-webkit-box-shadow:0 0 10px 2px rgba(0,0,0,.3);box-shadow:0 0 10px 2px rgba(0,0,0,.3);border-radius:3px;margin-bottom:18px;z-index:6;right:0;width:300px}.plan-stats .plan-triggers-container .btn-close{border-radius:50%;-webkit-box-shadow:0;box-shadow:0;line-height:1.5;border:1px solid #dedede;background-color:#fff;font-size:12px}.plan-stats .plan-triggers-container h3{font-size:17px;width:93%;text-align:left;border-bottom:1px solid #dedede;padding-bottom:6px;margin-bottom:10px}.tippy-popper .text-muted{color:inherit!important}.plan-diagram{line-height:.85em;font-family:Noto Sans}.plan-diagram.plan-diagram-top{max-height:30%}.plan-diagram.plan-diagram-left table tr td:nth-child(2){min-width:200px}.plan-diagram .legend ul li{font-size:13px}.plan-diagram .legend ul li span{display:inline-block;width:8px;height:8px;border-radius:50%}.plan-diagram table{cursor:pointer}.plan-diagram th{text-transform:uppercase;font-size:13px;font-weight:600;margin:0;color:#4d525a;width:10%;white-space:nowrap}',""]),t.exports=e},c605:function(t,e,n){"use strict";n.r(e);var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column vh-100",attrs:{id:"app"}},[n("div",{staticClass:"navbar container"},[n("router-link",{staticClass:"btn btn-secondary ml-auto",attrs:{tag:"a",to:"/"}},[t._v(" New Plan ")]),n("router-link",{staticClass:"btn btn-link",attrs:{tag:"a",to:"about"}},[t._v(" About ")])],1),n("router-view")],1)},r=[],i=n("9ab4"),s=n("60a3");function l(t){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return!e||"object"!==l(e)&&"function"!==typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}var v=["",""],b=function(t){function e(){return c(this,e),u(this,d(e).apply(this,arguments))}return f(e,t),e}(s["c"]);b=Object(i["a"])([s["a"]],b);var g=b,m=g,_=n("2877"),w=Object(_["a"])(m,a,r,!1,null,null,null),T=w.exports,y=n("8c4f"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"col d-flex"},[t._m(1),n("div",{staticClass:"dropdown ml-auto"},[n("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" Sample Plans ")]),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},t._l(t.samples,(function(e,o){return n("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(n){return n.preventDefault(),t.loadSample(e)}}},[t._v(" "+t._s(e[0])+" ")])})),0)])])]),n("form",{on:{submit:function(e){return e.preventDefault(),t.submitPlan(e)}}},[n("div",{staticClass:"form-group"},[t._m(2),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.planInput,expression:"planInput"}],class:["form-control",t.draggingPlan?"dropzone-over":""],attrs:{id:"planInput",rows:"8",placeholder:"Paste execution plan\\nOr drop a file"},domProps:{value:t.planInput},on:{dragenter:function(e){t.draggingPlan=!0},dragleave:function(e){t.draggingPlan=!1},drop:function(e){return e.preventDefault(),t.handleDrop(e)},input:function(e){e.target.composing||(t.planInput=e.target.value)}}})]),n("div",{staticClass:"form-group"},[t._m(3),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.queryInput,expression:"queryInput"}],class:["form-control",t.draggingQuery?"dropzone-over":""],attrs:{id:"queryInput",rows:"8",placeholder:"Paste corresponding SQL query\\nOr drop a file"},domProps:{value:t.queryInput},on:{dragenter:function(e){t.draggingQuery=!0},dragleave:function(e){t.draggingQuery=!1},drop:function(e){return e.preventDefault(),t.handleDrop(e)},input:function(e){e.target.composing||(t.queryInput=e.target.value)}}})]),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")])])])},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-warning"},[t._v(" This is the demo application for "),n("a",{attrs:{href:"https://github.com/dalibo/pev2"}},[t._v("PEV2")]),t._v(". It is serverless and doesn't store your plans. "),n("br"),t._v(" Please consider using "),n("a",{attrs:{href:"https://explain.dalibo.com"}},[t._v("explain.dalibo.com")]),t._v(" instead if you want to save or share your plans. ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-muted"},[t._v(" For best results, use "),n("code",[t._v("EXPLAIN (ANALYZE, COSTS, VERBOSE, BUFFERS, FORMAT JSON)")]),n("br"),n("em",[t._v("psql")]),t._v(" users can export the plan to a file using "),n("code",[t._v("psql -qAt -f explain.sql > analyze.json")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"planInput"}},[t._v("Plan "),n("span",{staticClass:"small text-muted"},[t._v("(text or JSON)")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"queryInput"}},[t._v("Query "),n("span",{staticClass:"small text-muted"},[t._v("(optional)")])])}],C=n("bc3a"),x=n.n(C);function E(t){return E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function k(t,e,n){return e&&P(t.prototype,e),n&&P(t,n),t}function L(t,e){return!e||"object"!==E(e)&&"function"!==typeof e?N(t):e}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}function I(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}function D(t,e){return D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},D(t,e)}var M=function(t){function e(){var t;return A(this,e),t=L(this,R(e).apply(this,arguments)),t.samples=[["Example 1 (JSON)","plan_1.json","plan_1.sql"],["Example 1 (plain text)","plan_1.txt","plan_1.sql"],["Example 2","plan_2.json","plan_2.sql"],["Example 3","plan_3.json","plan_3.sql"],["Example 4","plan_4.json"],["Example 5","plan_5.json","plan_5.sql"],["With subplan","plan_6.txt"],["With CTE","plan_7.txt"],["Very large plan","plan_8.json"],["With trigger","plan_trigger.json","plan_trigger.sql"],["With trigger (plain text)","plan_trigger.txt","plan_trigger_2.sql"],["Parallel (verbose)","plan_parallel.json"],["Parallel (4 workers)","plan_parallel2.txt","plan_parallel2.sql"]],t.planInput="",t.queryInput="",t.draggingPlan=!1,t.draggingQuery=!1,t}return I(e,t),k(e,[{key:"mounted",value:function(){var t=document.getElementsByTagName("textarea");Array.prototype.forEach.call(t,(function(t){t.placeholder=t.placeholder.replace(/\\n/g,"\n")}))}},{key:"submitPlan",value:function(){v[0]=this.planInput,v[1]=this.queryInput,un.push({path:"plan"})}},{key:"loadSample",value:function(t){var e=this;x.a.get("samples/"+t[1]).then((function(t){e.planInput=t.request.responseText})),t[2]?x.a.get("samples/"+t[2]).then((function(t){e.queryInput=t.request.responseText})):this.queryInput=""}},{key:"handleDrop",value:function(t){var e=t.srcElement;if(e instanceof HTMLTextAreaElement&&(this.draggingPlan=!1,this.draggingQuery=!1,t.dataTransfer)){var n=t.dataTransfer.files[0],o=new FileReader;o.onload=function(t){o.result instanceof ArrayBuffer||(e.value=o.result||"",e.dispatchEvent(new Event("input")))},o.readAsText(n)}}}]),e}(s["c"]);M=Object(i["a"])([s["a"]],M);var j=M,B=j,U=(n("0624"),Object(_["a"])(B,O,S,!1,null,null,null)),W=U.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.planSource?n("plan",{attrs:{"plan-source":t.planSource,"plan-query":t.planQuery}}):t._e()},K=[],$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["plan-container d-flex flex-column overflow-hidden flex-grow-1 bg-light",t.viewOptions.viewMode,t.viewOptions.orientation]},[t.plan?n("div",{staticClass:"plan-stats d-flex border-bottom border-top form-inline"},[n("div",{staticClass:"d-inline-block px-2"},[t._v(" Execution time: "),t.plan.planStats.executionTime?[n("span",{staticClass:"stat-value",domProps:{innerHTML:t._s(t.$options.filters.duration(t.plan.planStats.executionTime))}})]:[n("span",{staticClass:"text-muted"},[t._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:t.getHelpMessage("missing execution time")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2"},[t._v(" Planning time: "),t.plan.planStats.planningTime?[n("span",{staticClass:"stat-value"},[n("span",{class:"mb-0 p-0 px-1 alert "+t.planningTimeClass(t.plan.planStats.planningTime/t.plan.planStats.executionTime*100),domProps:{innerHTML:t._s(t.$options.filters.duration(t.plan.planStats.planningTime))}})])]:[n("span",{staticClass:"text-muted"},[t._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:t.getHelpMessage("missing planning time")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2"},[t._v(" Slowest: "),t.plan.planStats.maxDuration?[n("span",{staticClass:"stat-value",domProps:{innerHTML:t._s(t.$options.filters.duration(t.plan.planStats.maxDuration))}}),n("button",{staticClass:"bg-transparent border-0 p-0 m-0 pl-1",on:{click:function(e){return e.preventDefault(),t.showSlowestNode(e)}}},[n("i",{staticClass:"fa fa-thumb-tack text-muted"})])]:[n("span",{staticClass:"text-muted"},[t._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:t.getHelpMessage("missing slowest")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2"},[t._v(" Largest: "),t.plan.planStats.maxRows?[n("span",{staticClass:"stat-value"},[t._v(t._s(t._f("rows")(t.plan.planStats.maxRows))+" "),n("span",{staticClass:"text-muted"},[t._v("rows")])])]:[n("span",{staticClass:"text-muted"},[t._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:t.getHelpMessage("no rows")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2"},[t._v(" Costliest: "),t.plan.planStats.maxCost?[n("span",[t._v(t._s(t._f("cost")(t.plan.planStats.maxCost)))]),n("button",{staticClass:"bg-transparent border-0 p-0 m-0 pl-1",on:{click:function(e){return e.preventDefault(),t.showCostliestNode(e)}}},[n("i",{staticClass:"fa fa-thumb-tack text-muted"})])]:[n("span",{staticClass:"text-muted"},[t._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:t.getHelpMessage("missing costliest")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2 position-relative"},[n("span",{staticClass:"stat-label"},[t._v("Triggers: ")]),t.plan.planStats.triggers.length?[n("span",{staticClass:"stat-value"},[n("span",{class:"mb-0 p-0 px-1 alert "+t.durationClass(t.totalTriggerDurationPercent),domProps:{innerHTML:t._s(t.$options.filters.duration(t.triggersTotalDuration))}})]),n("button",{staticClass:"bg-transparent border-0 p-0 m-0 pl-1",on:{click:function(e){e.preventDefault(),t.showTriggers=!t.showTriggers}}},[n("i",{staticClass:"fa fa-caret-down text-muted"})]),t.showTriggers?n("div",{staticClass:"plan-triggers-container text-left"},[n("button",{staticClass:"btn btn-close pull-right",on:{click:function(e){t.showTriggers=!1}}},[n("i",{staticClass:"fa fa-close"})]),n("h3",[t._v("Triggers")]),t._l(t.plan.planStats.triggers,(function(e,o){return n("div",[t._v(" "+t._s(e["Trigger Name"])+" "),n("br"),n("span",{staticClass:"text-muted"},[t._v("Called")]),t._v(" "+t._s(e["Calls"])),n("span",{staticClass:"text-muted"},[t._v("×")]),n("span",{staticClass:"float-right"},[n("span",{class:"p-0 px-1 alert "+t.durationClass(t.triggerDurationPercent(e)),domProps:{innerHTML:t._s(t.$options.filters.duration(e.Time))}}),t._v(" | "+t._s(t.triggerDurationPercent(e))),n("span",{staticClass:"text-muted"},[t._v("%")])]),n("br"),e.Relation?n("span",{staticClass:"text-muted"},[t._v("on")]):t._e(),t._v(" "+t._s(e.Relation)+" "),n("div",{staticClass:"clearfix"}),o!=t.plan.planStats.triggers.length-1?n("hr",{staticClass:"my-2"}):t._e()])}))],2):t._e()]:n("span",{staticClass:"text-muted"},[t._v(" N/A ")])],2),n("button",{class:["btn btn-sm ml-auto p-0 px-2",{"text-primary":t.showSource}],attrs:{title:"View source"},on:{click:t.showHideSource}},[n("i",{staticClass:"fa fa-code p-0"})]),n("button",{class:["border-left btn btn-sm p-0 px-2",{"text-primary":!t.viewOptions.menuHidden}],on:{click:t.showHideMenu}},[n("i",{staticClass:"fa fa-cog p-0"})])]):t._e(),!t.plan||t.viewOptions.menuHidden||t.showSource?t._e():n("div",{staticClass:"form-inline small border-bottom py-1"},[n("div",{staticClass:"btn-group btn-group-xs ml-auto mr-2"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.viewMode==t.viewModes.FULL},on:{click:function(e){t.viewOptions.viewMode=t.viewModes.FULL}}},[t._v("full")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.viewMode==t.viewModes.COMPACT},on:{click:function(e){t.viewOptions.viewMode=t.viewModes.COMPACT}}},[t._v("compact")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.viewMode==t.viewModes.DOT},on:{click:function(e){t.viewOptions.viewMode=t.viewModes.DOT}}},[t._v("dot")])]),n("div",{staticClass:"btn-group btn-group-xs mr-2"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.orientation==t.orientations.TWOD},on:{click:function(e){t.viewOptions.orientation=t.orientations.TWOD}}},[n("i",{staticClass:"fa fa-sitemap"}),t._v(" 2D ")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.orientation==t.orientations.CLASSIC},on:{click:function(e){t.viewOptions.orientation=t.orientations.CLASSIC}}},[n("i",{staticClass:"fa fa-list"}),t._v(" classic ")])]),n("div",{staticClass:"form-check mr-2 border-left pl-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.viewOptions.showDiagram,expression:"viewOptions.showDiagram"}],staticClass:"form-check-input",attrs:{id:"showDiagram",type:"checkbox"},domProps:{checked:Array.isArray(t.viewOptions.showDiagram)?t._i(t.viewOptions.showDiagram,null)>-1:t.viewOptions.showDiagram},on:{change:function(e){var n=t.viewOptions.showDiagram,o=e.target,a=!!o.checked;if(Array.isArray(n)){var r=null,i=t._i(n,r);o.checked?i<0&&t.$set(t.viewOptions,"showDiagram",n.concat([r])):i>-1&&t.$set(t.viewOptions,"showDiagram",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.viewOptions,"showDiagram",a)}}}),t._m(0)]),n("div",{staticClass:"form-group mr-2 pl-2 border-left"},[n("label",{staticClass:"mr-2 text-muted"},[t._v("Graph metric:")]),n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.highlightType===t.highlightTypes.NONE},on:{click:function(e){t.viewOptions.highlightType=t.highlightTypes.NONE}}},[t._v("none")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.highlightType===t.highlightTypes.DURATION},attrs:{disabled:!t.rootNode[t.nodeProps.ACTUAL_DURATION]},on:{click:function(e){t.viewOptions.highlightType=t.highlightTypes.DURATION}}},[t._v("duration")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.highlightType===t.highlightTypes.ROWS},attrs:{disabled:void 0===t.rootNode[t.nodeProps.ACTUAL_ROWS]},on:{click:function(e){t.viewOptions.highlightType=t.highlightTypes.ROWS}}},[t._v("rows")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.highlightType===t.highlightTypes.COST},on:{click:function(e){t.viewOptions.highlightType=t.highlightTypes.COST}}},[t._v("cost")])])]),n("div",{staticClass:"form-check mr-2 pl-2 border-left"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.viewOptions.showCost,expression:"viewOptions.showCost"}],staticClass:"form-check-input",attrs:{id:"showCost",type:"checkbox",disabled:void 0===t.rootNode[t.nodeProps.TOTAL_COST]},domProps:{checked:Array.isArray(t.viewOptions.showCost)?t._i(t.viewOptions.showCost,null)>-1:t.viewOptions.showCost},on:{change:function(e){var n=t.viewOptions.showCost,o=e.target,a=!!o.checked;if(Array.isArray(n)){var r=null,i=t._i(n,r);o.checked?i<0&&t.$set(t.viewOptions,"showCost",n.concat([r])):i>-1&&t.$set(t.viewOptions,"showCost",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.viewOptions,"showCost",a)}}}),n("label",{staticClass:"form-check-label",attrs:{for:"showCost"}},[t._v("Cost")])]),n("div",{staticClass:"form-check mr-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.viewOptions.showPlannerEstimate,expression:"viewOptions.showPlannerEstimate"}],staticClass:"form-check-input",attrs:{id:"showPlannerEstimate",type:"checkbox"},domProps:{checked:Array.isArray(t.viewOptions.showPlannerEstimate)?t._i(t.viewOptions.showPlannerEstimate,null)>-1:t.viewOptions.showPlannerEstimate},on:{change:function(e){var n=t.viewOptions.showPlannerEstimate,o=e.target,a=!!o.checked;if(Array.isArray(n)){var r=null,i=t._i(n,r);o.checked?i<0&&t.$set(t.viewOptions,"showPlannerEstimate",n.concat([r])):i>-1&&t.$set(t.viewOptions,"showPlannerEstimate",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.viewOptions,"showPlannerEstimate",a)}}}),n("label",{staticClass:"form-check-label",attrs:{for:"showPlannerEstimate"}},[t._v("Estimations")])])]),t.validationMessage?n("div",{staticClass:"h-100 w-100 d-flex justify-content-center"},[n("div",{staticClass:"alert alert-danger align-self-center"},[t._v(t._s(t.validationMessage))])]):t.showSource?n("div",{staticClass:"h-100 w-100 d-flex flex-column"},[n("div",{staticClass:"h-100 w-100 d-flex flex-column"},[n("ul",{staticClass:"nav nav-pills p-2"},[n("li",{staticClass:"nav-item"},[n("a",{class:["nav-link py-1",{active:"plan"==t.sourceTabActive}],attrs:{href:""},on:{click:function(e){e.preventDefault(),t.sourceTabActive="plan"}}},[t._v("Plan")])]),n("li",{staticClass:"nav-item"},[n("a",{class:["nav-link py-1",{active:"query"==t.sourceTabActive}],attrs:{href:""},on:{click:function(e){e.preventDefault(),t.sourceTabActive="query"}}},[t._v("Query")])])]),n("div",{staticClass:"flex-grow-1 flex-shrink-1 bg-dark overflow-auto tab-content px-2"},[n("div",{class:["tab-pane fade show",{active:"plan"==t.sourceTabActive}]},[n("pre",{staticClass:"small p-2 text-white mb-0"},[n("code",[t._v(t._s(t.planSource))])])]),n("div",{class:["tab-pane fade show",{active:"query"==t.sourceTabActive}]},[t.planQuery?n("div",{staticClass:"bg-dark"},[n("pre",{staticClass:"small p-2 text-white mb-0"},[n("code",[t._v(t._s(t.planQuery))])])]):n("div",{staticClass:"text-white p-2"},[t._v(" No query provided for this plan ")])])])])]):n("div",{staticClass:"overflow-hidden flex-grow-1 flex-shrink-1 d-flex"},[t.viewOptions.showDiagram?n("div",{ref:"diagram",staticClass:"plan-diagram overflow-auto flex-shrink-0 border-right plan-diagram-left h-100"},[n("diagram",{attrs:{plan:t.plan,showNode:t.showNode}})],1):t._e(),n("div",{ref:"plan",staticClass:"overflow-auto flex-grow-1 flex-shrink-1 p-1",on:{mousedown:function(e){t.menuHidden=!0}}},[n("div",{staticClass:"plan h-100 w-100 d-flex grab-bing"},[n("ul",{staticClass:"node-children"},[n("li",[n("plan-node",{ref:"root",attrs:{node:t.rootNode,plan:t.plan,viewOptions:t.viewOptions}})],1)])])])])])},F=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"form-check-label",attrs:{for:"showDiagram"}},[n("i",{staticClass:"fa fa-align-left"}),t._v(" Diagram")])}],Y=n("2ef0"),q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{subplan:t.node[t.nodeProps.SUBPLAN_NAME],"d-flex flex-column align-items-center":t.viewOptions.orientation==t.orientations.TWOD}},[t.node[t.nodeProps.SUBPLAN_NAME]?n("h4",[t._v(t._s(t.node[t.nodeProps.SUBPLAN_NAME]))]):t._e(),n("div",{class:["text-left plan-node",{detailed:t.showDetails,"never-executed":t.isNeverExecuted,parallel:t.workersCount}]},[t.workersCount?n("div",{staticClass:"workers text-muted py-0 px-1"},t._l(t.workersCountReversed,(function(t){return n("div",{style:"top: "+(1+2*t)+"px; left: "+(1+3*(t+1))+"px;"})})),0):t._e(),t.hasChildren?n("div",{staticClass:"collapse-handle"},[n("i",{class:["fa fa-fw",{"fa-compress":!t.collapsed,"fa-expand":t.collapsed}],attrs:{title:"Collpase or expand child nodes"},on:{click:function(e){return e.stopPropagation(),t.toggleCollapsed()}}})]):t._e(),n("div",{staticClass:"plan-node-body"},[n("header",{attrs:{title:"view node details"},on:{click:function(e){e.stopPropagation(),t.showDetails=!t.showDetails}}},[n("h4",[t._v(" "+t._s(t.getNodeName())+" ")]),t.viewOptions.viewMode===t.viewModes.FULL?n("span",[t.node[t.nodeProps.ACTUAL_DURATION]?n("span",{staticClass:"node-duration"},[n("span",{class:"p-0 px-1 rounded alert "+t.durationClass,domProps:{innerHTML:t._s(t.$options.filters.duration(t.node[t.nodeProps.ACTUAL_DURATION]))}}),t.executionTimePercent!==1/0?[t._v(" | "),n("strong",[t._v(t._s(t.executionTimePercent))]),n("span",{staticClass:"text-muted"},[t._v("%")])]:t._e()],2):t.isNeverExecuted?n("span",{staticClass:"node-duration text-warning"},[t._v(" Never executed ")]):t._e()]):t._e()]),t.viewOptions.viewMode===t.viewModes.FULL?n("div",{staticClass:"font-italic text-left"},[t.node[t.nodeProps.RELATION_NAME]?n("div",[n("span",{staticClass:"text-muted"},[t._v("on ")]),t.node[t.nodeProps.SCHEMA]?n("span",[t._v(t._s(t.node[t.nodeProps.SCHEMA])+".")]):t._e(),t._v(t._s(t.node[t.nodeProps.RELATION_NAME])+" "),t.node[t.nodeProps.ALIAS]?n("span",[t._v(" ("+t._s(t.node[t.nodeProps.ALIAS])+")")]):t._e()]):t._e(),t.node[t.nodeProps.GROUP_KEY]?n("div",[n("span",{staticClass:"text-muted"},[t._v("by")]),t._v(" "+t._s(t._f("truncate")(t._f("keysToString")(t.node[t.nodeProps.GROUP_KEY]),250,"…")))]):t._e(),t.node[t.nodeProps.SORT_KEY]?n("div",[n("span",{staticClass:"text-muted"},[t._v("by")]),t._v(" "+t._s(t._f("truncate")(t._f("keysToString")(t.node[t.nodeProps.SORT_KEY]),250,"…")))]):t._e(),t.node[t.nodeProps.JOIN_TYPE]?n("div",[t._v(t._s(t._f("truncate")(t._f("keysToString")(t.node[t.nodeProps.JOIN_TYPE]),250,"…"))+" "),n("span",{staticClass:"text-muted"},[t._v("join")])]):t._e(),t.node[t.nodeProps.INDEX_NAME]?n("div",[n("span",{staticClass:"text-muted"},[t._v(" using")]),t._v(" "+t._s(t._f("keysToString")(t.node[t.nodeProps.INDEX_NAME])))]):t._e(),t.node[t.nodeProps.HASH_CONDITION]?n("div",[n("span",{staticClass:"text-muted"},[t._v(" on")]),t._v(" "+t._s(t._f("keysToString")(t.node[t.nodeProps.HASH_CONDITION])))]):t._e(),t.node[t.nodeProps.CTE_NAME]?n("div",[n("span",{staticClass:"text-muted"},[t._v("CTE")]),t._v(" "+t._s(t.node[t.nodeProps.CTE_NAME])+" ")]):t._e()]):t._e(),t.allWorkersLaunched||t.viewOptions.viewMode!==t.viewModes.FULL?t._e():n("div",{staticClass:"text-c-3 cursor-help",attrs:{title:t.getHelpMessage("workers planned not launched")}},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("span",[t._v("Not all workers launched")])]),t.lodash.isNumber(t.workersCount)&&!t.lodash.isNaN(t.workersCount)&&t.viewOptions.viewMode===t.viewModes.FULL?n("div",[n("span",[t._v("Workers: ")]),n("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.workersCount))])]):t._e(),n("div",{staticClass:"clearfix"}),t.viewOptions.highlightType!==t.highlightTypes.NONE&&null!==t.highlightValue?n("div",[n("div",{staticClass:"progress node-bar-container",staticStyle:{height:"5px"}},[n("div",{staticClass:"progress-bar",style:{width:t.barWidth+"%","background-color":t.getBarColor(t.barWidth)},attrs:{role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}})]),t.shouldShowNodeBarLabel()?n("span",{staticClass:"node-bar-label"},[n("span",{staticClass:"text-muted"},[t._v(t._s(t.viewOptions.highlightType)+":")]),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.highlightValue)}})]):t._e()]):t._e(),t.shouldShowCost&&t.node[t.nodeProps.ACTUAL_COST]?n("div",[n("span",[t._v(" Cost: "),n("span",{class:"p-0 px-1 alert "+t.costClass},[t._v(t._s(t._f("cost")(t.node[t.nodeProps.ACTUAL_COST])))]),t._v(" | "),n("span",[t._v(t._s(t.costPercent)),n("span",{staticClass:"text-muted"},[t._v("%")])])])]):t._e(),t.shouldShowPlannerEstimate()&&t.plannerRowEstimateDirection!=t.estimateDirections.none&&t.plannerRowEstimateValue?n("div",[t.plannerRowEstimateDirection===t.estimateDirections.over?n("span",[t._m(0),t._v(" estimated rows")]):t._e(),t.plannerRowEstimateDirection===t.estimateDirections.under?n("span",[t._m(1),t._v(" estimated rows")]):t._e(),t.plannerRowEstimateValue!=1/0?n("span",[t._v(" by "),n("span",{class:"p-0 px-1 alert "+t.estimationClass},[n("strong",{domProps:{innerHTML:t._s(t.$options.filters.factor(t.plannerRowEstimateValue))}})])]):t._e()]):t._e(),t.showDetails?n("div",[t.getNodeTypeDescription()?n("div",{staticClass:"node-description"},[n("span",{staticClass:"node-type"},[t._v(t._s(t.node[t.nodeProps.NODE_TYPE])+" Node")]),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.getNodeTypeDescription())}})]):t._e(),n("table",{staticClass:"table table-sm prop-list"},t._l(t.props,(function(e){return t.shouldShowProp(e.key,e.value)?n("tr",[n("td",{attrs:{width:"40%"}},[t._v(t._s(e.key))]),n("td",{domProps:{innerHTML:t._s(t.$options.filters.formatNodeProp(e.key,e.value,!0))}})]):t._e()})),0),t.workersCount?n("div",[t.lodash.isArray(t.node[t.nodeProps.WORKERS])?n("div",{staticClass:"accordion",attrs:{id:"accordion-"+t._uid}},[t._l(t.node[t.nodeProps.WORKERS],(function(e,o){return[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header p-0"},[n("button",{staticClass:"btn btn-link btn-sm text-secondary",staticStyle:{"font-size":"inherit"},attrs:{type:"button","data-toggle":"collapse","data-target":"#collapse-"+t._uid+"-"+o}},[n("i",{staticClass:"fa fa-chevron-right fa-fw"}),n("i",{staticClass:"fa fa-chevron-down fa-fw"}),t._v(" Worker "+t._s(e[t.workerProps.WORKER_NUMBER])+" ")])]),n("div",{staticClass:"collapse",attrs:{id:"collapse-"+t._uid+"-"+o,"data-parent":"#accordion-"+t._uid}},[n("div",{staticClass:"card-body p-0"},[n("table",{staticClass:"table table-sm prop-list mb-0"},t._l(e,(function(e,o){return t.shouldShowProp(o,e)?n("tr",[n("td",{attrs:{width:"40%"}},[t._v(t._s(o))]),n("td",{domProps:{innerHTML:t._s(t.$options.filters.formatNodeProp(o,e,!0))}})]):t._e()})),0)])])])]}))],2):n("div",{staticClass:"font-italic"},[n("strong",[t._v("Workers")]),t._v(": Detailed information not available. Consider using "),n("code",[t._v("EXPLAIN VERBOSE")]),t._v(". ")])]):t._e(),t._m(2)]):t._e()])]),t.plans?n("ul",{class:["node-children",{collapsed:t.collapsed}]},t._l(t.plans,(function(e){return n("li",[n("plan-node",{attrs:{node:e,plan:t.plan,viewOptions:t.viewOptions}})],1)})),0):t._e()])},z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("strong",[n("i",{staticClass:"fa fa-arrow-up"}),t._v(" over")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("strong",[n("i",{staticClass:"fa fa-arrow-down"}),t._v(" under")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-muted text-right"},[n("em",[t._v("* Calculated value")])])}];function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function G(t,e,n){return e&&J(t.prototype,e),n&&J(t,n),t}var X=function(){function t(){V(this,t)}return G(t,[{key:"getNodeTypeDescription",value:function(t){return Q[t.toUpperCase()]}},{key:"getHelpMessage",value:function(t){return Z[t.toUpperCase()]}}]),t}(),Q={LIMIT:"returns a specified number of rows from a record set.",SORT:"sorts a record set based on the specified sort key.","NESTED LOOP":"merges two record sets by looping through every record in the first set and\n   trying to find a match in the second set. All matching records are returned.","MERGE JOIN":"merges two record sets by first sorting them on a <strong>join key</strong>.",HASH:"generates a hash table from the records in the input recordset. Hash is used by\n   <strong>Hash Join</strong>.","HASH JOIN":"joins two record sets by hashing one of them (using a <strong>Hash Scan</strong>).",AGGREGATE:"groups records together based on a GROUP BY or aggregate function (like <code>sum()</code>).",HASHAGGREGATE:"groups records together based on a GROUP BY or aggregate function (like sum()). Hash Aggregate uses\n   a hash to first organize the records by a key.","SEQ SCAN":"finds relevant records by sequentially scanning the input record set. When reading from a table,\n   Seq Scans (unlike Index Scans) perform a single read operation (only the table is read).","INDEX SCAN":"finds relevant records based on an <strong>Index</strong>.\n    Index Scans perform 2 read operations: one to\n    read the index and another to read the actual value from the table.","INDEX ONLY SCAN":"finds relevant records based on an <strong>Index</strong>.\n    Index Only Scans perform a single read operation\n    from the index and do not read from the corresponding table.","BITMAP HEAP SCAN":"searches through the pages returned by the <strong>Bitmap Index Scan</strong>\n    for relevant rows.","BITMAP INDEX SCAN":"uses a <strong>Bitmap Index</strong> (index which uses 1 bit per page)\n    to find all relevant pages.\n    Results of this node are fed to the <strong>Bitmap Heap Scan</strong>.","CTE SCAN":"performs a sequential scan of <strong>Common Table Expression (CTE) query</strong> results. Note that\n    results of a CTE are materialized (calculated and temporarily stored)."},Z={"MISSING EXECUTION TIME":"Execution time (or Total runtime) not available for this plan. Make sure you\n    use EXPLAIN ANALYZE.","MISSING PLANNING TIME":"Planning time not available for this plan.","MISSING SLOWEST":"Could not compute durations. Make sure you use EXPLAIN ANALYZE.","NO ROWS":"No rows returned","MISSING COSTLIEST":"No cost info available. Considering using COSTS ON.","WORKERS PLANNED NOT LAUNCHED":"Less workers than planned were launched.\nConsider modifying max_parallel_workers or max_parallel_workers_per_gather."};function tt(t,e,n,o){var a=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.scrollLeft,s=r.left>=a.left&&r.left<=a.right&&r.right<=a.right,l=t.scrollTop,c=r.top>=a.top&&r.top<=a.bottom&&r.bottom<=a.bottom;!n&&s&&c?o():(i=r.left+t.scrollLeft-a.left-a.width/2+r.width/2,l=r.top+t.scrollTop-a.top-20,ot({element:t,to:{scrollTop:l,scrollLeft:i},duration:400,done:o}))}var et,nt=function(t){var e=t.currentTime,n=t.start,o=t.change,a=t.duration,r=e;return r/=a/2,r<1?o/2*r*r+n:(r-=1,-o/2*(r*(r-2)-1)+n)};function ot(t){var e=t.duration,n=t.element,o=t.to,a=t.done,r=n.scrollTop,i=n.scrollLeft,s=o.scrollTop-r,l=o.scrollLeft-i,c=(new Date).getTime(),u=function t(){var u=(new Date).getTime(),p=u-c;n.scrollTop=nt({currentTime:p,start:r,change:s,duration:e}),n.scrollLeft=nt({currentTime:p,start:i,change:l,duration:e}),p<e?requestAnimationFrame(t):(n.scrollTop=o.scrollTop,n.scrollLeft=o.scrollLeft,a&&a())};u()}function at(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function it(t,e,n){return e&&rt(t.prototype,e),n&&rt(t,n),t}(function(t){t[t["scrollTop"]=0]="scrollTop",t[t["scrollLeft"]=1]="scrollLeft"})(et||(et={})),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var st,lt,ct,ut,pt=function(){function t(){at(this,t)}return it(t,[{key:"hslToRgb",value:function(t,e,n){var o,a,r;if(0===e)o=a=r=n;else{var i=n<.5?n*(1+e):n+e-n*e,s=2*n-i;o=this.hue2rgb(s,i,t+1/3),a=this.hue2rgb(s,i,t),r=this.hue2rgb(s,i,t-1/3)}return[Math.floor(255*o),Math.floor(255*a),Math.floor(255*r)]}},{key:"numberToColorHsl",value:function(t){var e=1.2*(100-t)/360,n=this.hslToRgb(e,.9,.4);return"rgb("+n[0]+","+n[1]+","+n[2]+")"}},{key:"durationPercentToClass",value:function(t){return t>90?4:t>40?3:t>10?2:1}},{key:"hue2rgb",value:function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}}]),t}(),dt=n("c1df"),ft=n.n(dt),ht=n("4623"),vt=n.n(ht);function bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(t){t[t["time"]=0]="time",t[t["rows"]=1]="rows",t[t["cost"]=2]="cost",t[t["buffers"]=3]="buffers"})(st||(st={})),function(t){t[t["shared"]=0]="shared",t[t["temp"]=1]="temp",t[t["local"]=2]="local"}(lt||(lt={})),function(t){t["shared"]="Shared",t["temp"]="Temp",t["local"]="Local"}(ct||(ct={})),function(t){t["hit"]="Hit",t["read"]="Read",t["written"]="Written",t["dirtied"]="Dirtied"}(ut||(ut={}));var gt,mt=function t(){bt(this,t)};mt.NONE="none",mt.DURATION="duration",mt.ROWS="rows",mt.COST="cost",function(t){t[t["over"]=1]="over",t[t["under"]=2]="under",t[t["none"]=3]="none"}(gt||(gt={}));var _t=function t(){bt(this,t)};_t.FULL="full",_t.COMPACT="compact",_t.DOT="dot";var wt=function t(){bt(this,t)};wt.TWOD="twod",wt.CLASSIC="classic";var Tt,yt=function t(){bt(this,t)};yt.NODE_TYPE="Node Type",yt.ACTUAL_ROWS="Actual Rows",yt.PLAN_ROWS="Plan Rows",yt.ACTUAL_STARTUP_TIME="Actual Startup Time",yt.ACTUAL_TOTAL_TIME="Actual Total Time",yt.ACTUAL_LOOPS="Actual Loops",yt.STARTUP_COST="Startup Cost",yt.TOTAL_COST="Total Cost",yt.PLANS="Plans",yt.RELATION_NAME="Relation Name",yt.SCHEMA="Schema",yt.ALIAS="Alias",yt.GROUP_KEY="Group Key",yt.SORT_KEY="Sort Key",yt.SORT_METHOD="Sort Method",yt.SORT_SPACE_TYPE="Sort Space Type",yt.SORT_SPACE_USED="Sort Space Used",yt.JOIN_TYPE="Join Type",yt.INDEX_NAME="Index Name",yt.HASH_CONDITION="Hash Cond",yt.PARENT_RELATIONSHIP="Parent Relationship",yt.SUBPLAN_NAME="Subplan Name",yt.PARALLEL_AWARE="Parallel Aware",yt.WORKERS="Workers",yt.WORKERS_PLANNED="Workers Planned",yt.WORKERS_LAUNCHED="Workers Launched",yt.SHARED_HIT_BLOCKS="Shared Hit Blocks",yt.SHARED_READ_BLOCKS="Shared Read Blocks",yt.SHARED_DIRTIED_BLOCKS="Shared Dirtied Blocks",yt.SHARED_WRITTEN_BLOCKS="Shared Written Blocks",yt.TEMP_HIT_BLOCKS="Temp Hit Blocks",yt.TEMP_READ_BLOCKS="Temp Read Blocks",yt.TEMP_DIRTIED_BLOCKS="Temp Dirtied Blocks",yt.TEMP_WRITTEN_BLOCKS="Temp Written Blocks",yt.LOCAL_HIT_BLOCKS="Local Hit Blocks",yt.LOCAL_READ_BLOCKS="Local Read Blocks",yt.LOCAL_DIRTIED_BLOCKS="Local Dirtied Blocks",yt.LOCAL_WRITTEN_BLOCKS="Local Written Blocks",yt.IO_READ_TIME="I/O Read Time",yt.IO_WRITE_TIME="I/O Write Time",yt.COSTLIEST_NODE="*Costiest Node (by cost)",yt.LARGEST_NODE="*Largest Node (by rows)",yt.SLOWEST_NODE="*Slowest Node (by duration)",yt.ACTUAL_DURATION="*Actual Duration",yt.ACTUAL_COST="*Actual Cost",yt.PLANNER_ESTIMATE_FACTOR="*Planner Row Estimate Factor",yt.PLANNER_ESTIMATE_DIRECTION="*Planner Row Estimate Direction",yt.CTE_SCAN="CTE Scan",yt.CTE_NAME="CTE Name",yt.FUNCTION_NAME="Function Name",yt.ARRAY_INDEX_KEY="arrayIndex",yt.PEV_PLAN_TAG="plan_",function(t){t[t["duration"]=0]="duration",t[t["boolean"]=1]="boolean",t[t["rows"]=2]="rows",t[t["cost"]=3]="cost",t[t["factor"]=4]="factor",t[t["estimateDirection"]=5]="estimateDirection",t[t["json"]=6]="json",t[t["space"]=7]="space",t[t["increment"]=8]="increment"}(Tt||(Tt={}));var Ot={};Ot[yt.ACTUAL_ROWS]=Tt.rows,Ot[yt.PLAN_ROWS]=Tt.rows,Ot[yt.ACTUAL_TOTAL_TIME]=Tt.duration,Ot[yt.ACTUAL_STARTUP_TIME]=Tt.duration,Ot[yt.STARTUP_COST]=Tt.cost,Ot[yt.TOTAL_COST]=Tt.cost,Ot[yt.PARALLEL_AWARE]=Tt.boolean,Ot[yt.WORKERS]=Tt.json,Ot[yt.SORT_SPACE_USED]=Tt.space,Ot[yt.COSTLIEST_NODE]=Tt.boolean,Ot[yt.LARGEST_NODE]=Tt.boolean,Ot[yt.SLOWEST_NODE]=Tt.boolean,Ot[yt.ACTUAL_DURATION]=Tt.duration,Ot[yt.ACTUAL_COST]=Tt.cost,Ot[yt.PLANNER_ESTIMATE_FACTOR]=Tt.factor,Ot[yt.PLANNER_ESTIMATE_DIRECTION]=Tt.estimateDirection,Ot[yt.IO_READ_TIME]=Tt.duration,Ot[yt.IO_WRITE_TIME]=Tt.duration;var St=function t(){bt(this,t)};function Ct(t,e){if(e=!!e,t<1)return e?t+"ms":"<1 ms";if(t<1e3)return parseFloat(t.toPrecision(3)).toLocaleString()+"ms";var n=e?{}:{largest:2};return dt["duration"](t).format("w[w] d[d] h[h] m[m] s[s] SSS[ms]",n)}function xt(t){return t=parseFloat(t.toPrecision(3)),t.toLocaleString()}function Et(t){return t.toLocaleString()}function At(t){var e=parseFloat(t.toPrecision(2)).toLocaleString(),n=Y["template"]('${f}&nbsp;<span class="text-muted">&times;</span>');return n({f:e})}function Pt(t){return t instanceof Array||(t=[t]),t=Y["map"](t,(function(t){return t.replace(/(^\(|\)$)/g,"")})),t.join(", ")}function kt(t,e,n){return n=n||"...",t.length>e?t.slice(0,e)+n:t}function Lt(t){return Nt(1024*t)}function Nt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=1024,o=e<0?0:e,a=["Bytes","kB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(t)/Math.log(n)),i=Y["template"]('${value}&nbsp;<span class="text-muted">${unit}</span>'),s=parseFloat((t/Math.pow(n,r)).toFixed(o)).toLocaleString();return i({value:s,unit:a[r]})}function Rt(t,e,n){if(Y["has"](Ot,t)){if(Ot[t]===Tt.duration)return Ct(e,n);if(Ot[t]===Tt.boolean)return e?"yes":"no";if(Ot[t]===Tt.cost)return xt(e);if(Ot[t]===Tt.rows)return Et(e);if(Ot[t]===Tt.factor)return At(e);if(Ot[t]===Tt.estimateDirection)switch(e){case gt.over:return'<i class="fa fa-arrow-up"></i> over';case gt.under:return'<i class="fa fa-arrow-down"></i> under';default:return"-"}else{if(Ot[t]===Tt.json)return JSON.stringify(e,null,2);if(Ot[t]===Tt.space)return Lt(e)}}return e}function It(t){var e;return e=t>90?4:t>40?3:t>10?2:1,e?"c-"+e:""}function Dt(t){return Dt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Mt(t){return Ut(t)||Bt(t)||jt()}function jt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Bt(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Ut(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function Wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Kt(t,e,n){return e&&Ht(t.prototype,e),n&&Ht(t,n),t}function $t(t,e){return!e||"object"!==Dt(e)&&"function"!==typeof e?Ft(t):e}function Ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t){return Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Yt(t)}function qt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}function zt(t,e){return zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},zt(t,e)}St.WORKER_NUMBER="Worker Number",Ot[St.WORKER_NUMBER]=Tt.increment,vt()(dt);var Vt=function(t){function e(){var t;return Wt(this,e),t=$t(this,Yt(e).apply(this,arguments)),t.executionTimePercent=NaN,t.showDetails=!1,t.collapsed=!1,t.costPercent=NaN,t.barWidth=0,t.props=[],t.plans=[],t.estimateDirections=gt,t.highlightTypes=mt,t.viewModes=_t,t.orientations=wt,t.nodeProps=yt,t.workerProps=St,t.helpService=new X,t.colorService=new pt,t.lodash=Y,t}return qt(e,t),Kt(e,[{key:"created",value:function(){this.calculateProps(),this.calculateBar(),this.calculateDuration(),this.calculateCost(),this.plans=this.node[yt.PLANS],this.plannerRowEstimateDirection=this.node[yt.PLANNER_ESTIMATE_DIRECTION],this.plannerRowEstimateValue=this.node[yt.PLANNER_ESTIMATE_FACTOR],this.plan.nodeComponents.push(this)}},{key:"destroyed",value:function(){var t=this;Y["remove"](this.plan.nodeComponents,(function(e){return e===t}))}},{key:"calculateDuration",value:function(){var t=this.plan.planStats.executionTime||this.plan.content.Plan[yt.ACTUAL_TOTAL_TIME];this.executionTimePercent=Y["round"](this.node[yt.ACTUAL_DURATION]/t*100)}},{key:"calculateCost",value:function(){var t=this.plan.content.Plan[yt.TOTAL_COST];this.costPercent=Y["round"](this.node[yt.ACTUAL_COST]/t*100)}},{key:"calculateProps",value:function(){this.props=Y["chain"](this.node).omit(yt.PLANS).omit(yt.WORKERS).map((function(t,e){return{key:e,value:t}})).value()}},{key:"getNodeTypeDescription",value:function(){return this.helpService.getNodeTypeDescription(this.node[yt.NODE_TYPE])}},{key:"getNodeName",value:function(){var t=this.isParallelAware?"Parallel ":"";return t+=this.node[yt.NODE_TYPE],this.viewOptions.viewMode!==_t.DOT||this.showDetails?t.toUpperCase():t.replace(/[^A-Z]/g,"").toUpperCase()}},{key:"shouldShowPlannerEstimate",value:function(){return!(!this.viewOptions.showPlannerEstimate||!this.showDetails)||!this.collapsed&&this.viewOptions.viewMode!==_t.DOT&&this.viewOptions.showPlannerEstimate}},{key:"shouldShowNodeBarLabel",value:function(){return!!this.showDetails||!this.collapsed&&this.viewOptions.viewMode!==_t.DOT}},{key:"calculateBar",value:function(){var t;if(this.$options&&this.$options.filters)switch(this.viewOptions.highlightType){case mt.DURATION:if(t=this.node[yt.ACTUAL_DURATION],void 0===t){this.highlightValue=null;break}this.barWidth=Math.round(t/this.plan.planStats.maxDuration*100),this.highlightValue=this.$options.filters.duration(t);break;case mt.ROWS:if(t=this.node[yt.ACTUAL_ROWS],void 0===t){this.highlightValue=null;break}this.barWidth=Math.round(t/this.plan.planStats.maxRows*100)||0,this.highlightValue=this.$options.filters.rows(t);break;case mt.COST:if(t=this.node[yt.ACTUAL_COST],void 0===t){this.highlightValue=null;break}this.barWidth=Math.round(t/this.plan.planStats.maxCost*100),this.highlightValue=this.$options.filters.cost(t);break}}},{key:"getBarColor",value:function(t){return this.colorService.numberToColorHsl(t)}},{key:"toggleCollapsed",value:function(){this.collapsed=!this.collapsed}},{key:"getHelpMessage",value:function(t){return this.helpService.getHelpMessage(t)}},{key:"shouldShowProp",value:function(t,e){return e||Ot[t]===Tt.increment}},{key:"shouldShowCost",get:function(){return!(!this.viewOptions.showCost||!this.showDetails)||!this.collapsed&&this.viewOptions.viewMode!==_t.DOT&&this.viewOptions.showCost}},{key:"durationClass",get:function(){var t,e=this.executionTimePercent;return e>90?t=4:e>40?t=3:e>10&&(t=2),!!t&&"c-"+t}},{key:"estimationClass",get:function(){var t,e=this.node[yt.PLANNER_ESTIMATE_FACTOR];return e>1e3?t=4:e>100?t=3:e>10&&(t=2),!!t&&"c-"+t}},{key:"costClass",get:function(){var t,e=this.costPercent;return e>90?t=4:e>40?t=3:e>10&&(t=2),!!t&&"c-"+t}},{key:"hasChildren",get:function(){return!!this.plans}},{key:"workersCount",get:function(){return Y["isArray"](this.node[yt.WORKERS])?this.node[yt.WORKERS].length:parseInt(this.node[yt.WORKERS],0)}},{key:"workersCountReversed",get:function(){return Mt(Array(this.workersCount).keys()).slice().reverse()}},{key:"isParallelAware",get:function(){return this.node[yt.PARALLEL_AWARE]}},{key:"allWorkersLaunched",get:function(){return!this.node[yt.WORKERS_LAUNCHED]||this.node[yt.WORKERS_PLANNED]===this.node[yt.WORKERS_LAUNCHED]}},{key:"isNeverExecuted",get:function(){return this.plan.planStats.executionTime&&!this.node[yt.ACTUAL_LOOPS]}}]),e}(s["c"]);Object(i["a"])([Object(s["b"])(Object)],Vt.prototype,"node",void 0),Object(i["a"])([Object(s["b"])(Object)],Vt.prototype,"plan",void 0),Object(i["a"])([Object(s["b"])(Object)],Vt.prototype,"viewOptions",void 0),Object(i["a"])([Object(s["d"])("viewOptions.highlightType")],Vt.prototype,"calculateBar",null),Vt=Object(i["a"])([Object(s["a"])({name:"plan-node",filters:{cost:xt,duration:Ct,factor:At,formatNodeProp:Rt,keysToString:Pt,truncate:kt,rows:Et}})],Vt);var Jt=Vt,Gt=Jt,Xt=(n("51dc"),Object(_["a"])(Gt,q,z,!1,null,null,null)),Qt=Xt.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form-group text-center my-1"},[n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.metric===t.metrics.time},on:{click:function(e){t.viewOptions.metric=t.metrics.time}}},[t._v("time")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.metric===t.metrics.rows},on:{click:function(e){t.viewOptions.metric=t.metrics.rows}}},[t._v("rows")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.metric===t.metrics.cost},on:{click:function(e){t.viewOptions.metric=t.metrics.cost}}},[t._v("cost")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.metric===t.metrics.buffers},on:{click:function(e){t.viewOptions.metric=t.metrics.buffers}}},[t._v("buffers")])])]),t.viewOptions.metric==t.metrics.buffers?n("div",{staticClass:"form-group text-center my-1"},[n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.buffersMetric===t.buffersMetrics.shared},on:{click:function(e){t.viewOptions.buffersMetric=t.buffersMetrics.shared}}},[t._v("shared")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.buffersMetric===t.buffersMetrics.temp},on:{click:function(e){t.viewOptions.buffersMetric=t.buffersMetrics.temp}}},[t._v("temp")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.buffersMetric===t.buffersMetrics.local},on:{click:function(e){t.viewOptions.buffersMetric=t.buffersMetrics.local}}},[t._v("local")])])]):t._e(),n("div",{staticClass:"legend text-center"},[t.viewOptions.metric==t.metrics.buffers?n("ul",{staticClass:"list-unstyled list-inline mb-0"},[t._m(0),t._m(1),t._m(2),t._m(3)]):t._e()]),n("table",{staticClass:"my-1 table-hover"},[n("tbody",t._l(t.flat,(function(e,o){return n("tr",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,animation:"fade",delay:[200,0]},expression:"{arrow: true, animation: 'fade', delay: [200, 0]}"}],attrs:{content:t.tooltip(e[1])},on:{click:function(n){return n.preventDefault(),t.showNode(e[1],!1,!0)}}},[n("th",{staticClass:"node-type pr-2"},[t._l(t.lodash.range(e[0]),(function(n){return[-1!=t.lodash.indexOf(e[3],n)?[t._v("│")]:0!==n?[t._v("⠀")]:t._e()]})),t._v(t._s(0!==o?e[2]?"└":"├":"")+" "+t._s(t.nodeType(e))+" ")],2),n("td",[t.viewOptions.metric==t.metrics.time?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"progress-bar border-left bg-secondary",style:"width: "+e[1][t.nodeProps.ACTUAL_DURATION]/(t.plan.planStats.executionTime||t.plan.content.Plan[t.nodeProps.ACTUAL_TOTAL_TIME])*100+"%; height:5px;",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t.viewOptions.metric==t.metrics.rows?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-secondary",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.ACTUAL_ROWS]/t.plan.planStats.maxRows*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t.viewOptions.metric==t.metrics.cost?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-secondary",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.ACTUAL_COST]/t.plan.planStats.maxCost*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t.viewOptions.metric==t.metrics.buffers&&t.viewOptions.buffersMetric==t.buffersMetrics.shared&&t.plan.planStats.maxSharedBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.SHARED_HIT_BLOCKS]/t.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.SHARED_READ_BLOCKS]/t.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.SHARED_DIRTIED_BLOCKS]/t.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.SHARED_WRITTEN_BLOCKS]/t.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t.viewOptions.metric==t.metrics.buffers&&t.viewOptions.buffersMetric==t.buffersMetrics.temp&&t.plan.planStats.maxTempBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.TEMP_HIT_BLOCKS]/t.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.TEMP_READ_BLOCKS]/t.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.TEMP_DIRTIED_BLOCKS]/t.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.TEMP_WRITTEN_BLOCKS]/t.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t.viewOptions.metric==t.metrics.buffers&&t.viewOptions.buffersMetric==t.buffersMetrics.local&&t.plan.planStats.maxLocalBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.LOCAL_HIT_BLOCKS]/t.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.LOCAL_READ_BLOCKS]/t.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.LOCAL_DIRTIED_BLOCKS]/t.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.LOCAL_WRITTEN_BLOCKS]/t.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t._e()])])})),0)])])},te=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-hit rounded"}),t._v(" Hit ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-read"}),t._v(" Read ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-dirtied"}),t._v(" Dirtied ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-written"}),t._v(" Written ")])}];function ee(t){return ee="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ee(t)}function ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ae(t,e,n){return e&&oe(t.prototype,e),n&&oe(t,n),t}function re(t,e){return!e||"object"!==ee(e)&&"function"!==typeof e?ie(t):e}function ie(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function se(t){return se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},se(t)}function le(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}function ce(t,e){return ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ce(t,e)}var ue=function(t){function e(){var t;return ne(this,e),t=re(this,se(e).apply(this,arguments)),t.flat=[],t.lodash=Y,t.nodeProps=yt,t.metrics=st,t.buffersMetrics=lt,t.viewOptions={metric:st.time,buffersMetric:lt.shared},t}return le(e,t),ae(e,[{key:"created",value:function(){var t=localStorage.getItem("diagramViewOptions");t&&Y["assignIn"](this.viewOptions,JSON.parse(t)),this.flatten(this.flat,0,this.plan.content.Plan,!0,[])}},{key:"onViewOptionsChanged",value:function(t,e){localStorage.setItem("diagramViewOptions",JSON.stringify(this.viewOptions))}},{key:"tooltip",value:function(t){switch(this.viewOptions.metric){case st.time:return this.timeTooltip(t);case st.rows:return this.rowsTooltip(t);case st.cost:return this.costTooltip(t);case st.buffers:return this.buffersTooltip(t)}return""}},{key:"timeTooltip",value:function(t){return["Duration: ",Ct(t[yt.ACTUAL_DURATION],!0)].join("")}},{key:"rowsTooltip",value:function(t){return["Rows: ",Et(t[yt.ACTUAL_ROWS])].join("")}},{key:"costTooltip",value:function(t){return["Cost: ",Et(t[yt.ACTUAL_COST])].join("")}},{key:"buffersTooltip",value:function(t){var e,n,o,a,r="";switch(this.viewOptions.buffersMetric){case lt.shared:e=t[yt.SHARED_HIT_BLOCKS],n=t[yt.SHARED_READ_BLOCKS],a=t[yt.SHARED_DIRTIED_BLOCKS],o=t[yt.SHARED_WRITTEN_BLOCKS];break;case lt.temp:e=t[yt.TEMP_HIT_BLOCKS],n=t[yt.TEMP_READ_BLOCKS],a=t[yt.TEMP_DIRTIED_BLOCKS],o=t[yt.TEMP_WRITTEN_BLOCKS];break;case lt.local:e=t[yt.LOCAL_HIT_BLOCKS],n=t[yt.LOCAL_READ_BLOCKS],a=t[yt.LOCAL_DIRTIED_BLOCKS],o=t[yt.LOCAL_WRITTEN_BLOCKS];break}switch(r+=e?"<br>Hit: "+Et(e):"",r+=n?"<br>Read: "+Et(n):"",r+=a?"<br>Dirtied: "+Et(a):"",r+=o?"<br>Written: "+Et(o):"",r=r||" N/A",this.viewOptions.buffersMetric){case lt.shared:r="Shared Blocks:"+r;break;case lt.temp:r="Temp Blocks:"+r;break;case lt.local:r="Local Blocks:"+r;break}return r}},{key:"nodeType",value:function(t){return t[1][yt.NODE_TYPE]}},{key:"flatten",value:function(t,e,n,o,a){var r=this;t.push([e,n,o,Y["concat"]([],a)]),o||a.push(e),Y["each"](n.Plans,(function(o){r.flatten(t,e+1,o,o===Y["last"](n.Plans),a)})),o||a.pop()}}]),e}(s["c"]);Object(i["a"])([Object(s["b"])()],ue.prototype,"plan",void 0),Object(i["a"])([Object(s["b"])()],ue.prototype,"showNode",void 0),Object(i["a"])([Object(s["d"])("viewOptions",{deep:!0})],ue.prototype,"onViewOptionsChanged",null),ue=Object(i["a"])([Object(s["a"])({filters:{durationClass:It}})],ue);var pe=ue,de=pe,fe=Object(_["a"])(de,Zt,te,!1,null,null,null),he=fe.exports;function ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var be=function t(e){ve(this,t),this[yt.NODE_TYPE]=e;var n=/^((?:Parallel\s+)?(?:Seq\sScan|Bitmap\s+Heap\s+Scan|Foreign\s+Scan|Update|Insert|Delete))\son\s(\S+)(?:\s+(\S+))?$/.exec(e),o=/^(Bitmap\s+Index\s+Scan)\son\s(\S+)$/.exec(e),a=/^((?:Parallel\s+)?Index(?:\sOnly)?\sScan(?:\sBackward)?)\susing\s(\S+)\son\s(\S+)(?:\s+(\S+))?$/.exec(e),r=/^(CTE\sScan)\son\s(\S+)(?:\s+(\S+))?$/.exec(e),i=/^(Function\sScan)\son\s(\S+)(?:\s+(\S+))?$/.exec(e),s=/^(Subquery\sScan)\son\s(.+)$/.exec(e);n?(this[yt.NODE_TYPE]=n[1],this[yt.RELATION_NAME]=n[2],n[3]&&(this[yt.ALIAS]=n[3])):o?(this[yt.NODE_TYPE]=o[1],this[yt.INDEX_NAME]=o[2]):a?(this[yt.NODE_TYPE]=a[1],this[yt.INDEX_NAME]=a[2],this[yt.RELATION_NAME]=a[3],a[4]&&(this[yt.ALIAS]=a[4])):r?(this[yt.NODE_TYPE]=r[1],this[yt.CTE_NAME]=r[2],r[3]&&(this[yt.ALIAS]=r[3])):i?(this[yt.NODE_TYPE]=i[1],this[yt.FUNCTION_NAME]=i[2],i[3]&&(this[yt.ALIAS]=i[3])):s&&(this[yt.NODE_TYPE]=s[1]);var l=/^(Parallel\s+)(.*)/.exec(this[yt.NODE_TYPE]);l&&(this[yt.NODE_TYPE]=l[2],this[yt.PARALLEL_AWARE]=!0);var c=/(.*)\sJoin$/.exec(this[yt.NODE_TYPE]),u=/(.*)\s+(Full|Left|Right|Anti)/.exec(this[yt.NODE_TYPE]);c&&(this[yt.NODE_TYPE]=c[1],u&&(this[yt.NODE_TYPE]=u[1],this[yt.JOIN_TYPE]=u[2]),this[yt.NODE_TYPE]+=" Join")};function ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var me=function t(e){ge(this,t),this[St.WORKER_NUMBER]=e},_e=n("3c66"),we=n.n(_e);function Te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ye(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Oe(t,e,n){return e&&ye(t.prototype,e),n&&ye(t,n),t}var Se=function(){function t(){Te(this,t)}return Oe(t,[{key:"createPlan",value:function(t,e,n){n=n.replace(/(\S)(?!$)(\s{2,})/gm,"$1 ");var o={id:yt.PEV_PLAN_TAG+(new Date).getTime().toString(),name:t||"plan created on "+ft()().format("LLL"),createdOn:new Date,content:e,query:n,planStats:{},nodeComponents:[]};return this.analyzePlan(o),o}},{key:"analyzePlan",value:function(t){this.processNode(t.content.Plan),this.calculateMaximums(t.content)}},{key:"processNode",value:function(t){var e=this;this.calculatePlannerEstimate(t),Y["each"](t[yt.PLANS],(function(n){var o;n[yt.WORKERS]||(t[yt.WORKERS_PLANNED]&&(o=t[yt.WORKERS_LAUNCHED]||t[yt.WORKERS_PLANNED]),n[yt.WORKERS]=o||t[yt.WORKERS]);e.processNode(n)})),this.calculateActuals(t)}},{key:"calculateMaximums",value:function(t){function e(t){return Y["map"](t,(function(t){return[t,e(t[yt.PLANS])]}))}var n=Y["flattenDeep"](e([t.Plan])),o=Y["maxBy"](n,yt.ACTUAL_ROWS);o&&(t.maxRows=o[yt.ACTUAL_ROWS]);var a=Y["maxBy"](n,yt.ACTUAL_COST);a&&(a[yt.COSTLIEST_NODE]=!0,t.maxCost=a[yt.ACTUAL_COST],t.costliest=a);var r=Y["maxBy"](n,yt.ACTUAL_DURATION);function i(t){return t[yt.SHARED_HIT_BLOCKS]+t[yt.SHARED_READ_BLOCKS]+t[yt.SHARED_DIRTIED_BLOCKS]+t[yt.SHARED_WRITTEN_BLOCKS]}r&&(r[yt.SLOWEST_NODE]=!0,t.maxDuration=r[yt.ACTUAL_DURATION],t.slowest=r);var s=Y["maxBy"](n,(function(t){return i(t)}));function l(t){return t[yt.TEMP_HIT_BLOCKS]+t[yt.TEMP_READ_BLOCKS]+t[yt.TEMP_DIRTIED_BLOCKS]+t[yt.TEMP_WRITTEN_BLOCKS]}s&&(t.maxSharedBlocks=i(s));var c=Y["maxBy"](n,(function(t){return l(t)}));function u(t){return t[yt.LOCAL_HIT_BLOCKS]+t[yt.LOCAL_READ_BLOCKS]+t[yt.LOCAL_DIRTIED_BLOCKS]+t[yt.LOCAL_WRITTEN_BLOCKS]}c&&(t.maxTempBlocks=l(c));var p=Y["maxBy"](n,(function(t){return u(t)}));p&&(t.maxLocalBlocks=u(p))}},{key:"calculateActuals",value:function(t){Y["isUndefined"](t[yt.ACTUAL_TOTAL_TIME])||(t[yt.ACTUAL_DURATION]=t[yt.ACTUAL_TOTAL_TIME],t[yt.WORKERS]||(t[yt.ACTUAL_DURATION]=t[yt.ACTUAL_DURATION]*t[yt.ACTUAL_LOOPS]),t[yt.ACTUAL_DURATION]=t[yt.ACTUAL_DURATION]-this.childrenDuration(t,0)),t[yt.TOTAL_COST]&&(t[yt.ACTUAL_COST]=t[yt.TOTAL_COST]),Y["each"](t[yt.PLANS],(function(e){"InitPlan"!==e[yt.PARENT_RELATIONSHIP]&&e[yt.TOTAL_COST]&&(t[yt.ACTUAL_COST]=t[yt.ACTUAL_COST]-e[yt.TOTAL_COST])})),t[yt.ACTUAL_COST]<0&&(t[yt.ACTUAL_COST]=0)}},{key:"childrenDuration",value:function(t,e){var n=this;return Y["each"](t[yt.PLANS],(function(t){"InitPlan"!==t[yt.PARENT_RELATIONSHIP]&&(e+=t[yt.ACTUAL_DURATION]||0,e=n.childrenDuration(t,e))})),e}},{key:"calculatePlannerEstimate",value:function(t){t[yt.ACTUAL_ROWS]&&(t[yt.PLANNER_ESTIMATE_FACTOR]=t[yt.ACTUAL_ROWS]/t[yt.PLAN_ROWS],t[yt.PLANNER_ESTIMATE_DIRECTION]=gt.none,t[yt.PLANNER_ESTIMATE_FACTOR]>1&&(t[yt.PLANNER_ESTIMATE_DIRECTION]=gt.under),t[yt.PLANNER_ESTIMATE_FACTOR]<1&&(t[yt.PLANNER_ESTIMATE_DIRECTION]=gt.over,t[yt.PLANNER_ESTIMATE_FACTOR]=t[yt.PLAN_ROWS]/t[yt.ACTUAL_ROWS]))}},{key:"fromSource",value:function(t){t=t.replace(/^(["'])(.*)\1\r?\n/gm,"$2\n"),t=t.replace(/\s*\+\r?\n/g,"\n");var e=!1;try{e=JSON.parse(t)}catch(n){}return e||/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)(\[|\{)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\n[\s\S]*?\1(\]|\})[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*/gm.exec(t)?this.fromJson(t):this.fromText(t)}},{key:"fromJson",value:function(t){var e=t.split(/[\r\n]+/),n="",o=0;Y["each"](e,(function(t,e){var a=/^(\s*)(\[|\{)\s*$/.exec(t);if(a)return n=a[1],o=e,!1}));var a=0;Y["each"](e,(function(t,e){var o=new RegExp("^"+n+"(]|})s*$").exec(t);if(o)return a=e,!1}));var r=e.slice(o,a+1).join("\n"),i=this.parseJson(r);return i instanceof Array&&(i=i[0]),i}},{key:"parseJson",value:function(t){var e=we.a.parser(),n=[],o=null,a=null;return e.onvalue=function(t){var e=n[n.length-1];if(Y["isArray"](e))e.push(t);else{var o=Object.keys(e),a=o[o.length-1];e[a]=t}},e.onopenobject=function(t){var e={};e[t]=null,n.push(e)},e.onkey=function(t){var e=n[n.length-1],o=Object.keys(e);-1!==o.indexOf(t)?a=[n.length-1,e[t]]:e[t]=null},e.onopenarray=function(){n.push([])},e.oncloseobject=e.onclosearray=function(){var t=n.pop();if(n.length){var e=n[n.length-1];if(a&&a[0]===n.length-1)Y["merge"](a[1],t),a=null;else if(Y["isArray"](e))e.push(t);else{var r=Object.keys(e),i=r[r.length-1];e[i]=t}}else o=t},e.write(t).close(),o}},{key:"fromText",value:function(t){var e=this,n=t.split(/\r?\n/),o={Plan:null},a=[];if(Y["each"](n,(function(t){t=t.replace(/"\s*$/,""),t=t.replace(/^\s*"/,"");var n="^s*$",r="^\\s*(QUERY|---|#).*$",i="^(\\s*->\\s*|\\s*)",s="([^\\r\\n\\t\\f\\v\\:\\(]*?)",l="\\(cost=(\\d+\\.\\d+)\\.\\.(\\d+\\.\\d+)\\s+rows=(\\d+)\\s+width=(\\d+)\\)",c="(?:",u=")",p="\\(",d="\\)",f="(?:actual\\stime=(\\d+\\.\\d+)\\.\\.(\\d+\\.\\d+)\\srows=(\\d+)\\sloops=(\\d+)|actual\\srows=(\\d+)\\sloops=(\\d+)|(never\\s+executed))",h="?",v=new RegExp(n).exec(t),b=new RegExp(r).exec(t),g=new RegExp(i+s+"\\s*"+c+(c+l)+"\\s+"+p+f+d+u+"|"+c+l+u+"|"+c+p+f+d+u+u+"*\\s*$","gm"),m=g.exec(t),_=/^(\s*)((?:Sub|Init)Plan)\s*(?:\d+\s*)?\s*(?:\(returns.*\)\s*)?$/gm,w=_.exec(t),T=/^(\s*)CTE\s+(\S+)\s*$/g,y=T.exec(t),O=/^(\s*)Trigger\s+(.*):\s+time=(\d+\.\d+)\s+calls=(\d+)\s*$/g,S=O.exec(t),C=new RegExp(/^(\s*)Worker\s+(\d+):\s+/.source+c+f+u+h+"(.*)\\s*$","g"),x=C.exec(t),E=/^(\s*)(\S.*\S)\s*$/g,A=E.exec(t);if(!v&&!b)if(!m||y||w){if(w){var P=w[1],k=w[2];Y["remove"](a,(function(t){return t[0]>=P.length}));var L=Y["last"](a)[1],N={node:L.node,subelementType:k.toLowerCase(),name:w[0]},R=P.length;a.push([R,N])}else if(y){var I=y[1],D=y[2];Y["remove"](a,(function(t){return t[0]>=I.length}));var M=Y["last"](a)[1],j={node:M.node,subelementType:"initplan",name:"CTE "+D},B=I.length;a.push([B,j])}else if(x){x[1];var U=parseInt(x[2],0),W=Y["last"](a)[1];W.node[yt.WORKERS]||(W.node[yt.WORKERS]=[]);var H=e.getWorker(W.node,U);if(H||(H=new me(U),W.node[yt.WORKERS].push(H)),x[3]&&x[4]&&(H[yt.ACTUAL_STARTUP_TIME]=parseFloat(x[3]),H[yt.ACTUAL_TOTAL_TIME]=parseFloat(x[4]),H[yt.ACTUAL_ROWS]=parseInt(x[5],0),H[yt.ACTUAL_LOOPS]=parseInt(x[6],0)),e.parseSort(x[10],H))return;var K=x[10].split(/: (.+)/).filter((function(t){return t}));if(x[10]){if(!K[1])return;var $=Y["startCase"](K[0]);H[$]=K[1]}}else if(S){var F=S[1];Y["remove"](a,(function(t){return t[0]>=F.length})),o.Triggers=o.Triggers||[],o.Triggers.push({"Trigger Name":S[2],Time:parseFloat(S[3].replace(/(\s*ms)$/,"")),Calls:S[4]})}else if(A){var q,z=A[1],V=A[2].split(/: (.+)/).filter((function(t){return t}));if(!V[1])return;if(Y["remove"](a,(function(t){return t[0]>=z.length})),q=0===a.length?o:Y["last"](a)[1].node,e.parseSort(A[2],q))return;if(e.parseBuffers(A[2],q))return;if(e.parseIOTimings(A[2],q))return;var J=V[1].replace(/(\s*ms)$/,"");parseFloat(J)&&(J=parseFloat(J));var G=Y["startCase"](V[0]);q[G]=J}}else{var X=m[1],Q=m[13],Z=new be(m[2]);(m[3]&&m[4]||m[14]&&m[15])&&(Z[yt.STARTUP_COST]=parseFloat(m[3]||m[14]),Z[yt.TOTAL_COST]=parseFloat(m[4]||m[15]),Z[yt.PLAN_ROWS]=parseInt(m[5]||m[16],0)),(m[7]&&m[8]||m[18]&&m[19])&&(Z[yt.ACTUAL_STARTUP_TIME]=parseFloat(m[7]||m[18]),Z[yt.ACTUAL_TOTAL_TIME]=parseFloat(m[8]||m[19])),(m[9]&&m[10]||m[11]&&m[12]||m[20]&&m[21])&&(Z[yt.ACTUAL_ROWS]=parseInt(m[9]||m[11]||m[20],0),Z[yt.ACTUAL_LOOPS]=parseInt(m[10]||m[12]||m[21],0)),Q&&(Z[yt.ACTUAL_LOOPS]=0,Z[yt.ACTUAL_ROWS]=0,Z[yt.ACTUAL_TOTAL_TIME]=0);var tt={node:Z,subelementType:"subnode"},et=X.split("->")[0].length;if(0===a.length)return a.push([et,tt]),void(o.Plan=Z);Y["remove"](a,(function(t){return t[0]>=et}));var nt=Y["last"](a)[1];a.push([et,tt]),nt.node[yt.PLANS]||(nt.node[yt.PLANS]=[]),"initplan"===nt.subelementType?(Z[yt.PARENT_RELATIONSHIP]="InitPlan",Z[yt.SUBPLAN_NAME]=nt.name):"subplan"===nt.subelementType&&(Z[yt.PARENT_RELATIONSHIP]="SubPlan",Z[yt.SUBPLAN_NAME]=nt.name),nt.node.Plans.push(Z)}})),!o.Plan)throw new Error("Unable to parse plan");return o}},{key:"parseSort",value:function(t,e){var n=/^(\s*)Sort Method:\s+(.*)\s+(Memory|Disk):\s+(?:(\S*)kB)\s*$/g,o=n.exec(t);return!!o&&(e[yt.SORT_METHOD]=o[2].trim(),e[yt.SORT_SPACE_USED]=o[4],e[yt.SORT_SPACE_TYPE]=o[3],!0)}},{key:"parseBuffers",value:function(t,e){var n=this,o=/Buffers:\s+(.*)\s*$/g,a=o.exec(t);return!!a&&(Y["each"](a[1].split(/,\s+/),(function(t){var o=/(shared|temp|local)\s+(.*)$/g,a=o.exec(t);if(a){var r=a[1];Y["each"](["hit","read","written","dirtied"],(function(t){e[Y["map"]([r,t,"blocks"],Y["capitalize"]).join(" ")]=0})),Y["each"](a[2].split(/\s+/),(function(t){n.parseBuffer(t,r,e)}))}})),!0)}},{key:"parseBuffer",value:function(t,e,n){var o=t.split(/=/),a=o[0],r=parseInt(o[1],0);n[Y["map"]([e,a,"blocks"],Y["capitalize"]).join(" ")]=r}},{key:"getWorker",value:function(t,e){return Y["find"](t[yt.WORKERS],(function(t){return t[St.WORKER_NUMBER]===e}))}},{key:"parseIOTimings",value:function(t,e){var n=/I\/O Timings:\s+(.*)\s*$/g,o=n.exec(t);return!!o&&(e[yt.IO_READ_TIME]=0,e[yt.IO_WRITE_TIME]=0,Y["each"](o[1].split(/\s+/),(function(t){var n=t.split(/=/),o=n[0],a=parseFloat(n[1]),r=["I/O",Y["capitalize"](o),"Time"].join(" ");e[r]=a})),!0)}}]),t}();function Ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ee(t,e,n){return e&&xe(t.prototype,e),n&&xe(t,n),t}var Ae=function(){function t(e){var n=this;Ce(this,t),this.element=e,this.listener=!0,this.start=!1,this.startMousePositionX=0,this.startMousePositionY=0,this.startScrollPositionX=0,this.startScrollPositionY=0,this.element.addEventListener("mousedown",(function(t){t.target.closest(".plan-node-body")||(t.preventDefault(),n.clearSelection(),n.startMousePositionX=t.screenX,n.startMousePositionY=t.screenY,n.startScrollPositionX=n.element.scrollLeft,n.startScrollPositionY=n.element.scrollTop,n.start=!0)})),document.documentElement.addEventListener("mouseup",(function(t){t.preventDefault(),n.startMousePositionX=0,n.startMousePositionY=0,n.startScrollPositionX=0,n.startScrollPositionY=0,n.start=!1})),this.element.addEventListener("mousemove",(function(t){n.listener&&n.start&&(t.preventDefault(),n.element.scrollTo(n.startScrollPositionX+(n.startMousePositionX-t.screenX),n.startScrollPositionY+(n.startMousePositionY-t.screenY)))}))}return Ee(t,[{key:"clearSelection",value:function(){if(window.getSelection){var t=window.getSelection();t&&t.removeAllRanges()}}}]),t}(),Pe=n("6018");function ke(t){return ke="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ne(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Re(t,e,n){return e&&Ne(t.prototype,e),n&&Ne(t,n),t}function Ie(t,e){return!e||"object"!==ke(e)&&"function"!==typeof e?De(t):e}function De(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Me(t)}function je(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Be(t,e)}function Be(t,e){return Be=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Be(t,e)}s["c"].use(Pe["b"]),s["c"].component("tippy",Pe["a"]);var Ue=function(t){function e(){var t;return Le(this,e),t=Ie(this,Me(e).apply(this,arguments)),t.flat=[],t.menuHidden=!0,t.validationMessage="",t.showTriggers=!1,t.showSource=!1,t.sourceTabActive="plan",t.helpService=new X,t.lodash=Y,t.viewOptions={menuHidden:!0,showHighlightBar:!1,showPlannerEstimate:!1,showCost:!1,showPlanStats:!0,highlightType:mt.NONE,viewMode:_t.FULL,orientation:wt.TWOD,showDiagram:!0},t.highlightTypes=mt,t.viewModes=_t,t.orientations=wt,t.planService=new Se,t.nodeProps=yt,t}return je(e,t),Re(e,[{key:"mounted",value:function(){this.handleScroll()}},{key:"handleScroll",value:function(){var t=this.$refs.plan;new Ae(t)}},{key:"created",value:function(){var t,e=this,n=localStorage.getItem("viewOptions");n&&Y["assignIn"](this.viewOptions,JSON.parse(n));try{t=this.planService.fromSource(this.planSource),this.validationMessage=""}catch(a){return this.validationMessage="Couldn't parse plan",void(this.plan=null)}this.rootNode=t.Plan,this.plan=this.planService.createPlan("",t,this.planQuery);var o=this.plan.content;this.plan.planStats={executionTime:o["Execution Time"]||o["Total Runtime"]||null,planningTime:o["Planning Time"]||null,maxRows:o.maxRows||null,maxCost:o.maxCost||null,maxDuration:o.maxDuration||null,maxSharedBlocks:o.maxSharedBlocks||null,maxTempBlocks:o.maxTempBlocks||0,triggers:o.Triggers||[]},s["c"].nextTick((function(){e.showNode(e.rootNode,!0,!1),e.plan}))}},{key:"onViewOptionsChanged",value:function(t,e){localStorage.setItem("viewOptions",JSON.stringify(this.viewOptions))}},{key:"onShowSource",value:function(t){t||s["c"].nextTick(this.handleScroll)}},{key:"showHideMenu",value:function(){this.viewOptions.menuHidden=!this.viewOptions.menuHidden}},{key:"showHideSource",value:function(){this.showSource=!this.showSource}},{key:"getHelpMessage",value:function(t){return this.helpService.getHelpMessage(t)}},{key:"showSlowestNode",value:function(){this.showNode(this.plan.content.slowest,!0,!0)}},{key:"showCostliestNode",value:function(){this.showNode(this.plan.content.costliest,!0,!0)}},{key:"showNode",value:function(t,e,n){var o=Y["find"](this.plan.nodeComponents,(function(e){return e.node===t})),a=this.$refs.plan;if(a&&o){var r=o.$el.querySelector(".plan-node");r&&tt(a,r,e,(function(){n&&(r.classList.add("highlight"),setTimeout((function(){r.classList.remove("highlight")}),1e3))}))}}},{key:"triggerDurationPercent",value:function(t){this.plan,this.plan&&this.plan.planStats;var e=this.plan&&this.plan.planStats.executionTime||0,n=t.Time;return Y["round"](n/e*100)}},{key:"toggleDiagram",value:function(){this.viewOptions.showDiagram=!this.viewOptions.showDiagram}},{key:"timelineTooltip",value:function(t){return this.plan?["Duration: ",Ct(t.node[yt.ACTUAL_DURATION],!0)," | ",t.executionTimePercent,"%"].join(""):""}},{key:"durationClass",value:function(t){var e;return e=t>90?4:t>40?3:t>10?2:1,!!e&&"c-"+e}},{key:"planningTimeClass",value:function(t){var e;return t>90?e=4:t>40?e=3:t>10&&(e=2),!!e&&"c-"+e}},{key:"totalTriggerDurationPercent",get:function(){this.plan,this.plan&&this.plan.planStats;var t=this.plan&&this.plan.planStats.executionTime||0,e=this.triggersTotalDuration||0;return Y["round"](e/t*100)}},{key:"triggersTotalDuration",get:function(){if(this.plan)return Y["sumBy"](this.plan.planStats.triggers,(function(t){return t.Time}))}}]),e}(s["c"]);Object(i["a"])([Object(s["b"])(String)],Ue.prototype,"planSource",void 0),Object(i["a"])([Object(s["b"])(String)],Ue.prototype,"planQuery",void 0),Object(i["a"])([Object(s["d"])("viewOptions",{deep:!0})],Ue.prototype,"onViewOptionsChanged",null),Object(i["a"])([Object(s["d"])("showSource")],Ue.prototype,"onShowSource",null),Ue=Object(i["a"])([Object(s["a"])({name:"plan",components:{PlanNode:Qt,Diagram:he},directives:{},filters:{cost:xt,duration:Ct,durationClass:It,rows:Et}})],Ue);var We=Ue,He=We,Ke=(n("44bc"),Object(_["a"])(He,$,F,!1,null,null,null)),$e=Ke.exports;function Fe(t){return Fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(t)}function Ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ze(t,e,n){return e&&qe(t.prototype,e),n&&qe(t,n),t}function Ve(t,e){return!e||"object"!==Fe(e)&&"function"!==typeof e?Je(t):e}function Je(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ge(t){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ge(t)}function Xe(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qe(t,e)}function Qe(t,e){return Qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Qe(t,e)}var Ze=function(t){function e(){var t;return Ye(this,e),t=Ve(this,Ge(e).apply(this,arguments)),t.planSource=v[0],t.planQuery=v[1],t}return Xe(e,t),ze(e,[{key:"beforeMount",value:function(){this.planSource||un.push({name:"home"})}}]),e}(s["c"]);Ze=Object(i["a"])([Object(s["a"])({components:{Plan:$e}})],Ze);var tn=Ze,en=tn,nn=Object(_["a"])(en,H,K,!1,null,null,null),on=nn.exports,an=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},rn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h2",[t._v(" Disclaimer ")]),n("p",[t._v(" This project is a rewrite of the excellent "),n("a",{attrs:{href:"https://github.com/AlexTatiyants/pev"}},[t._v("Postgres Explain Visualizer (pev)")]),t._v(". Kudos go to Alex Tatiyants. ")]),n("p",[t._v(" The pev project was initialy written in early 2016 but seem to be abandonned since then. There was no activity at all for more than "),n("a",{attrs:{href:"https://github.com/AlexTatiyants/pev/issues/42"}},[t._v("3 years and counting")]),t._v(" though there are "),n("a",{attrs:{href:"https://github.com/AlexTatiyants/pev/issues"}},[t._v("several issues open")]),t._v(" and relevant pull requests pending. ")]),n("p",[t._v(" The current project has several goals: "),n("ul",[n("li",[t._v(" isolate the plan view component and its dependencies in order to use it in any web app "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[t._v(" make it work with recent version of JS frameworks "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[t._v(" upgrade Bootstrap to a more recent version "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[t._v(" use VueJS just for a matter of taste "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[t._v(" add ability to parse text format "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[t._v(" add support for new features (parallelism, triggers, disk usage, …) ")]),n("li",[t._v(" maintain the project to match upgrades in PostgreSQL. ")])])]),n("h2",[t._v(" Usage tips ")]),n("p",[t._v(" To get the most out of it, we recommend generating a query plan using the following line: "),n("code",[t._v("EXPLAIN (ANALYZE, COSTS, VERBOSE, BUFFERS, FORMAT JSON)")]),t._v(". It is recommend submitting a (decently formatted) SQL query that generated the plan. ")]),n("p",[t._v(" PEV2 can also parse text although the JSON format usually has better support. ")]),n("h2",[t._v(" Help improve PEV2 ")]),n("p",[t._v(" You can help us. ")]),n("p",[t._v(" Report issues or contribute to the code on "),n("a",{attrs:{href:"https://github.com/dalibo/pev2"}},[t._v("Github")]),t._v(". ")]),n("hr"),n("div",{staticClass:"text-center text-muted"},[n("b",[t._v("pev2")]),t._v(" is brought to you by "),n("a",{attrs:{href:"https://dalibo.com"}},[t._v("Dalibo")])])])}],sn={},ln=Object(_["a"])(sn,an,rn,!1,null,null,null),cn=ln.exports;o["a"].use(y["a"]);var un=new y["a"]({routes:[{path:"/",name:"home",component:W},{path:"/plan",name:"plan",component:on},{path:"/about",name:"about",component:cn}]});o["a"].config.productionTip=!1,new o["a"]({router:un,render:function(t){return t(T)}}).$mount("#app")}});
//# sourceMappingURL=index.be915853.js.map